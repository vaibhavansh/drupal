use Drupal\user\Entity\User;

/**
 * Get all active users by a given role.
 *
 * @param string $role_id
 *   The machine name of the role (e.g., 'administrator').
 *
 * @return \Drupal\user\Entity\User[]
 *   An array of user entities.
 */
function getUsersByRole(string $role_id): array {
  $user_ids = \Drupal::entityQuery('user')
    ->condition('status', 1)
    ->condition('roles', $role_id)
    ->execute();

  return User::loadMultiple($user_ids);
}
