<?php

namespace Drupal\taxonomy_tools\Controller;

use Drupal\Core\Controller\ControllerBase;
use Drupal\taxonomy\Entity\Term;

class TaxonomyToolsController extends ControllerBase {

  /**
   * Create taxonomy terms.
   */
  public function createTerms() {
    // Array of term names to create in vocabulary "courses"
    $terms_to_create = ['Diploma', 'Engineering', 'Medicine'];
    $vocabulary = 'courses'; // ⚠️ replace with your actual vocabulary machine name

    $created = [];
    foreach ($terms_to_create as $name) {
      // Check if term already exists
      $query = \Drupal::entityQuery('taxonomy_term')
        ->condition('vid', $vocabulary)
        ->condition('name', $name);
      $tids = $query->execute();
      if (empty($tids)) {
        $term = Term::create([
          'name' => $name,
          'vid' => $vocabulary,
        ]);
        $term->save();
        $created[] = $name;
      }
    }

    return [
      '#markup' => 'Created terms: ' . implode(', ', $created),
    ];
  }

  /**
   * Delete taxonomy terms.
   */
  public function deleteTerms() {
    $terms_to_delete = ['Diploma', 'Engineering', 'Medicine'];
    $vocabulary = 'courses'; // ⚠️ replace with your actual vocabulary machine name

    $query = \Drupal::entityQuery('taxonomy_term')
      ->condition('vid', $vocabulary)
      ->condition('name', $terms_to_delete, 'IN');
    $tids = $query->execute();

    if ($tids) {
      $terms = Term::loadMultiple($tids);
      foreach ($terms as $term) {
        $term->delete();
      }
    }

    return [
      '#markup' => 'Deleted terms: ' . implode(', ', $terms_to_delete),
    ];
  }
}
